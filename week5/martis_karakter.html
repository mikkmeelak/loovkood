<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
 <title>vaba aega pole</title>
 <style>
  / here you can change the background /
  body { background-color: ghostWhite; }
  canvas { position: fixed; top: 0; right: 0; bottom: 0; left: 0; cursor: none; }
  img { display: none; }
 </style>
</head>

<body>
 <canvas id="canvas" resize keepalive="true" hidpi="off"></canvas>
</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.9.25/paper-full.min.js"></script>
<script type="text/javascript">
paper.install(window);

window.onload = function() {
 paper.setup('canvas');
 
 view.viewSize = [ window.innerWidth, window.innerHeight ];
 window.onresize = function(event) { view.viewSize = [ window.innerWidth, window.innerHeight ]; }
 // YOUR CODE STARTS HERE
 
 // measure screen size and save it
 var WIDTH = view.size.width;
 var HEIGHT = view.size.height;
 
 var MOUSE_X = WIDTH / 2;
 var MOUSE_Y = HEIGHT / 2;
 
 // create a new box just for feedback that everything works
 var BACKGROUND = new Path.Rectangle(0, 0, WIDTH, HEIGHT);
 
 // create a new box just for feedback that everything works
 var ROUND = new Path.Circle(WIDTH / 2, HEIGHT / 2, 50);
 ROUND.fillColor = new Color({ hue: 40, saturation: 1, brightness: 1 });
 ROUND.strokeColor = new Color(0);
 ROUND.strokeWidth = 3;
 
 var TEXT = new PointText(new Point(WIDTH / 2, HEIGHT / 2));
 TEXT.fillColor = 'black';
 TEXT.content = 'VABA AEG';
 TEXT.fontSize = 18;
 
 var DAYS = [];
 var BOXES = [];
 var COUNT = 50;
 
 for(i=0; i < COUNT; i++){
  DAYS[i] = new PointText(new Point(Math.random()*WIDTH, Math.random()*HEIGHT));
  DAYS[i].fillColor= 'black';
  DAYS[i].content = 'E.T.K.N.R.L.P';
  DAYS[i].fontSize = 20;
  DAYS[i].rotation = Math.random()*360;
  BOXES[i] = new Path.Rectangle(DAYS[i].position.x-75, DAYS[i].position.y-15, 150, 30);
  BOXES[i].strokeColor = new Color(0);
  BOXES[i].strokeWidth = 3;
  BOXES[i].applyMatrix = false;
  BOXES[i].rotation = DAYS[i].rotation;
 }
 
 var distanceX, distanceY, distance, angle;
 var minDistance = 150;
 
 // this function runs every frame
 view.onFrame = function(event){
  ROUND.position.x = MOUSE_X;
  ROUND.position.y = MOUSE_Y;
  TEXT.position.x = MOUSE_X;
  TEXT.position.y = MOUSE_Y;
  
  for(i=0; i<DAYS.length; i++){
   distanceX = ROUND.position.x - DAYS[i].position.x;
   distanceY = ROUND.position.y - DAYS[i].position.y;
   distance = Math.sqrt(distanceX*distanceX + distanceY*distanceY);
 if(distance < minDistance){
    angle=Math.atan2(-distanceY, -distanceX);
    DAYS[i].position.x = Math.max(75, Math.min(ROUND.position.x+minDistance*Math.cos(angle), WIDTH-75));
    DAYS[i].position.y = Math.max(75, Math.min(ROUND.position.y+minDistance*Math.sin(angle), HEIGHT-75));
    DAYS[i].rotation = (DAYS[i].rotation * 2 + ((360*angle) / (2*Math.PI) + 90)) / 3;
    BOXES[i].position.x = DAYS[i].position.x;
    BOXES[i].position.y = DAYS[i].position.y;
    BOXES[i].rotation = DAYS[i].rotation;
   }
  }
 };

 view.onMouseMove = function(event) {
  MOUSE_X = event.point.x;
  MOUSE_Y = event.point.y;
 };
};
</script>
</html>